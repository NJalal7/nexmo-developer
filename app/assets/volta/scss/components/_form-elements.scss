//
// Copyright (c) 2018-present, Vonage. All rights reserved.
//

%select-arrow {
	$fill-color: encode-hex-code($black);
	background-image: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2020%2020%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20style%3D%22fill%3A#{$fill-color}%3B%22%20d%3D%22M3.38326%207.96544C3.58628%207.68629%203.97717%207.62457%204.25632%207.82759L9.99983%2012.0047L15.7433%207.82759C16.0225%207.62457%2016.4134%207.68629%2016.6164%207.96544C16.8194%208.2446%2016.7577%208.63549%2016.4785%208.83851L10.3674%2013.283C10.1483%2013.4423%209.85138%2013.4423%209.63222%2013.283L3.52111%208.83851C3.24195%208.63549%203.18023%208.2446%203.38326%207.96544Z%22%2F%3E%0A%3C%2Fsvg%3E');
  	background-position: center center;
	background-repeat: no-repeat;
	background-size: contain;
	content: '';
	height: 16px;
	margin-top: -8px;
	pointer-events: none;
	position: absolute;
	right: 14px;
	top: 50%;
	width: 16px;
}

.Vlt-label {
	display: block;
	font-size: 1.4rem;
	margin-bottom: $unit0;
	text-align: left;

	label {
		font-size: 1.4rem;
	}

	& + .Vlt-radio,
	& + .Vlt-checkbox,
	& + .Vlt-form__element {
		margin-top: $unit0;
	}
}

// autofill background for Chrome
.Vlt-input {
	input:-webkit-autofill,
	input:-webkit-autofill:hover,
	input:-webkit-autofill:focus {
		box-shadow: 0 0 0px 1000px $purple-lighter inset;
	}
}

.Vlt-input,
.Vlt-select,
.Vlt-custom-select,
.Vlt-textarea {
	max-width: 100%;
	position: relative;
}

.Vlt-input input,
.Vlt-select select,
.Vlt-textarea textarea,
.Vlt-custom-select__input {
	appearance: none; // prevents box shadow on iOS
	background: $white;
	border: 1px solid $grey;
	border-radius: 6px;
	box-shadow: none;
	color: $black;
	display: block;
	font-size: 1.4rem;
	height: 36px;
	padding-left: 10px;
	transition: all .5s;
	width: 100%;

	&:hover {
		border-color: $black;
	}

	&:focus {
		@extend .Vlt-form-focus-style;
	}

	&:invalid {
		@extend .Vlt-form-error-style;
	}

	&:disabled {
		@extend .Vlt-form-disabled-readonly-style;
		color: $grey-dark;
		cursor: default;
	}

	&[readonly] {
		@extend .Vlt-form-disabled-readonly-style;
	}
}

.Vlt-composite {
	display: flex !important;
	flex-flow: row;
	position: relative;

	.Vlt-input,
	.Vlt-select {
		flex: 1;
		position: relative;

		.Vlt-form__element--elastic & {
			flex: 0;
			flex-basis: auto;
		}
	}

	&--appendedicon {
		.Vlt-input input,
		.Vlt-select select {
			padding-right: 40px;
		}
	}

	&:not(.Vlt-composite--appendedicon) {
		.Vlt-input:first-child input,
		.Vlt-select:first-child select {
			border-bottom-right-radius: 0;
			border-right: 0;
			border-top-right-radius: 0;
		}
	}

	&__append,
	&__prepend {
		.Vlt-btn,
		.Vlt-dropdown__btn,
		.Vlt-native-dropdown select {
			@extend %Vlt-btn--app;
			@extend %Vlt-btn--tertiary;
			border: 1px solid $grey;
			margin: 0 !important;
			padding: 7px 13px;

			&:hover {
				transform: scale(1);
			}

			.Vlt-form__element--big & {
				@extend %Vlt-btn--large;
				padding: 14px 21px;
			}
		}
	}

	&__append {
		position: relative;
		z-index: 2;

		.Vlt-btn,
		.Vlt-dropdown__btn,
		.Vlt-native-dropdown select {
			border-bottom-left-radius: 0;
			border-top-left-radius: 0;
		}

		&--icon {
			height: 100%;
			padding: 10px 12px;
			position: absolute;
			right: 0;
			width: 40px;

			svg {
				fill: $grey-dark;
				height: 16px;
				width: 16px;
			}
		}
	}

	&__prepend {
		position: relative;
		z-index: 2;

		.Vlt-btn,
		.Vlt-dropdown__btn,
		.Vlt-native-dropdown select {
			border-bottom-right-radius: 0;
			border-top-right-radius: 0;
		}

		&:not(.Vlt-composite__prepend--icon) + .Vlt-input input,
		&:not(.Vlt-composite__prepend--icon) + .Vlt-select select {
			border-bottom-left-radius: 0;
			border-left: 0;
			border-top-left-radius: 0;
		}

		&--icon {
			height: 100%;
			padding: 8px 10px 7px;
			position: absolute;
			width: 40px;

			svg {
				fill: $black;
				height: 20px;
				width: 20px;
			}

			& + .Vlt-input input,
			& + .Vlt-select select {
				padding-left: 40px;
			}
		}
	}

	.Vlt-btn,
	.Vlt-dropdown__btn
	.Vlt-native-dropdown select {
		margin: 0;
	}

	.Vlt-input {
		input {
			&[readonly],
			&:disabled {
				border-color: $grey;
			}
		}
	}
}

.Vlt-textarea {
	textarea {
		height: auto;
		padding-bottom: $unit1;
		padding-top: $unit1;
		resize: vertical;
	}
}

.Vlt-select,
.Vlt-custom-select {

	&:after {
		@extend %select-arrow;
	}
}

.Vlt-select select,
.Vlt-custom-select__input {
	appearance: none;
	cursor: pointer;
	padding-right: 42px;
	text-indent: 1px;
	text-overflow: '';

	&::-ms-expand {
	    display: none;
	}
}

.Vlt-form__group {
	align-items: flex-end;
	display: flex;
	flex-flow: row wrap;

	.Vlt-form__element {
		margin-right: $unit2;

		&:last-child {
			margin-right: 0;
		}
	}

	> .Vlt-btn {
		margin-bottom: $unit1;
	}

	> .Vlt-form__element__error,
	> .Vlt-form__element__hint {
		flex: 0 0 100%;
		margin-bottom: $unit0;
	}

	& + .Vlt-form__group,
	& + .Vlt-form__element {
		margin-top: 0; // This ensures vertical spacing consistency
	}

	&--M-plus {
		@media #{$S-only} {
			display: block;
		}
	}

	&--inline {
		display: inline-flex;
	}

	&--stretch {
		.Vlt-form__element {
			flex: auto;
		}
	}
}

.Vlt-form__element {
	padding: $unit1 0;

	h1,
	h2,
	h3,
	h4 {
		margin: 0;
	}

	&__hint,
	&__error {
		display: block;
		flex: 0 0 100%;
		font-size: 1.2rem;
		line-height: 1.33;
		margin-top: 5px;
		text-align: left;
	}

	&__hint {
		color: $grey-darker;
	}

	&__error {
		color: $red;

		&:before {
			$fill-color: encode-hex-code($red);
			background-image: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2016%2016%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20style%3D%22fill%3A#{$fill-color}%3B%22%20d%3D%22M8%200C3.6%200%200%203.6%200%208C0%2012.4%203.6%2016%208%2016C12.4%2016%2016%2012.4%2016%208C16%203.6%2012.4%200%208%200ZM8%2012C7.4%2012%207%2011.6%207%2011C7%2010.4%207.4%2010%208%2010C8.6%2010%209%2010.4%209%2011C9%2011.6%208.6%2012%208%2012ZM9%209H7V4H9V9Z%22%2F%3E%0A%3C%2Fsvg%3E');
			background-position: center center;
			background-repeat: no-repeat;
			background-size: contain;
			content: '';
			display: inline-block;
			height: 16px;
			margin-right: 6px;
			vertical-align: bottom;
			width: 16px;
		}
	}

	&--error {
		input,
		select,
		textarea,
		.Vlt-radio input:not(:checked) + .Vlt-radio__icon,
		.Vlt-checkbox input:not(:checked) + .Vlt-checkbox__icon {
			@extend .Vlt-form-error-style;
		}

		&.Vlt-form__element--big {
			label {
				color: $red;
			}
		}
	}

	&--valid {
		input,
		select,
		textarea {
			@extend .Vlt-form-valid-style;
		}
	}

	&--elastic {
		input,
		select,
		.Vlt-input,
		.Vlt-select {
			display: inline-block;
			width: auto;

			& + input,
			& + select,
			& + .Vlt-input,
			& + .Vlt-select {
				margin-left: $unit2;
			}
		}

		textarea,
		.Vlt-textarea {
			display: inline-block;
			width: auto;
		}
	}

	&--inline-content {
		.Vlt-radio,
		.Vlt-checkbox {
			display: inline-block;
			margin-bottom: $unit2;
			margin-right: $unit2;
			margin-top: $unit0 !important;
		}
	}

	.Vlt-dropdown__btn {
		margin: 0;
	}
}

.Vlt-radio,
.Vlt-checkbox {
	position: relative;

	input {
		appearance: none;
		height: 0px;
		opacity: 0;
		overflow: hidden;
		position: absolute;
		width: 0px;

		&:focus,
		&:active {
			box-shadow: none;
			outline: none;

			& + .Vlt-radio__icon,
			& + .Vlt-checkbox__icon {
				@extend .Vlt-form-focus-style;
			}
		}

		&:disabled {
			& + .Vlt-radio__icon,
			& + .Vlt-checkbox__icon {
				@extend .Vlt-form-disabled-readonly-style;
			}

			&:active {
				& + .Vlt-radio__icon,
				& + .Vlt-checkbox__icon {
					box-shadow: none;
				}
			}
		}

		&:invalid {
			& + .Vlt-radio__icon,
			& + .Vlt-checkbox__icon {
				@extend .Vlt-form-error-style;
			}

			&:focus {
				& + .Vlt-radio__icon,
				& + .Vlt-checkbox__icon {
					box-shadow: 0 0 5px rgba($red, 0.5);
				}
			}
		}
	}

	label {
		// We removed cursor: pointer because it would add complications in case it's disabled
		align-items: flex-start;
		display: flex;
		text-align: left;
	}

	&__button {
		display: block;
		flex: 0 0 22px;
		height: 22px;
		margin-right: 10px;
		margin-top: -1px;
		position: relative;
		width: 22px;
	}

	&__icon {
		border: 2px solid $grey;
		display: block;
		height: 100%;
		transition: all 0.2s;
		width: 100%;

		&:after {
			content: '';
			display: block;
			position: absolute;
			transform: scale(0.1, 0.1);
			transition: transform 0.2s ease-out;
		}
	}

	&:hover {
		.Vlt-radio__icon,
		.Vlt-checkbox__icon {
			border-color: $black;
		}
	}

	& + .Vlt-radio,
	& + .Vlt-checkbox,
	& + .Vlt-form__element__error,
	& + .Vlt-form__element__hint {
		margin-top: $unit2;
	}

	&--inline {
		display: inline-block;
		margin-bottom: $unit2;
		margin-right: $unit2;
		margin-top: $unit0 !important;
	}
}

.Vlt-radio {
	&__icon {
		border-radius: 100%;
		transition: all 0.2s;

		&:after {
			border-radius: 100%;
			height: 10px;
			left: 50%;
			margin-left: -5px;
			margin-top: -5px;
			top: 50%;
			width: 10px;
		}
	}

	&__button {

		input {
			&:checked ~ .Vlt-radio__icon {
				&:after {
					background: $black;
					transform: scale(1, 1);
				}
			}
		}
	}
}

.Vlt-checkbox {

	&__icon {
		border-radius: 4px;

		&:after {
			background-position: center center;
			background-repeat: no-repeat;
			background-size: 18px 18px;
			content: '';
			height: 100%;
			left: 0;
			top: 0;
			transform: scale(1, 1);
			width: 100%;
		}
	}

	&__button {

		input {
			&:checked ~ .Vlt-checkbox__icon {
				&:after {
					$fill-color: encode-hex-code($black);
					background-image: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2018%2018%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20style%3D%22fill%3A#{$fill-color}%3B%22%20d%3D%22M6.99998%2014.0002L2.59998%209.6002L3.99998%208.2002L6.99998%2011.2002L14.5%203.7002L15.9%205.1002L6.99998%2014.0002Z%22%2F%3E%0A%3C%2Fsvg%3E');
				}
			}
		}
	}

	&--partial {
		.Vlt-checkbox__icon {
			&:after {
				$fill-color: encode-hex-code($black);
				background-image: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2018%2018%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20style%3D%22fill%3A#{$fill-color}%3B%22%20d%3D%22M6.99998%2014.0002L2.59998%209.6002L3.99998%208.2002L6.99998%2011.2002L14.5%203.7002L15.9%205.1002L6.99998%2014.0002Z%22%2F%3E%0A%3C%2Fsvg%3E');
			}
		}
	}
}

.Vlt-form-error-style {
	background: $red-lighter;
	border-color: $red;

	&:hover {
		border-color: $red;
	}
}

.Vlt-form-valid-style {
	border-color: $green;

	&:hover {
		border-color: $green;
	}
}

.Vlt-form-focus-style {
	background: $white;
	border-color: $black;
	outline: none;

	&:hover {
		border-color: $black;
	}
}

.Vlt-form-disabled-readonly-style {
	background: $grey-lighter;
	border-color: $grey-light;
	box-shadow: none;

	&:hover {
		border-color: $grey-light;
	}
}

// Inspired from https://github.com/tonystar/float-label-css
// by Tony Star
// Compatibility https://caniuse.com/#feat=css-placeholder-shown

.Vlt-form__element--big {
	display: block;
	position: relative;

	label {
		color: $grey-darker;
		cursor: text;
		font-size: 1.2rem;
		left: 14px;
		opacity: 1;
		pointer-events: none;
		position: absolute;
		top: 5px;
		transition: all 0.2s;
	}

	textarea {
		width: 100%;
	}

	.Vlt-input,
	.Vlt-select,
	.Vlt-custom-select,
	.Vlt-textarea {
		input,
		select,
		.Vlt-custom-select__input {
			height: 5rem;
			padding-left: 13px;
			padding-top: 14px;

			&,
			textarea {
				&::placeholder {
					color: $grey;
					opacity: 1;
					transition: all 0.2s;
				}

				&:placeholder-shown:not(:focus)::placeholder {
					opacity: 0;
				}

				&:placeholder-shown:not(:focus) + * {
					font-size: 1.6rem;
					margin-top: -1rem;
					top: 50%;
				}
			}
		}
	}

	.Vlt-select,
	.Vlt-custom-select {
		&:after {
			height: 20px;
			margin-top: -10px;
			width: 20px;
		}
	}

	.Vlt-custom-select__input {
		@extend .Vlt-truncate;
		text-align: left;
	}
}
